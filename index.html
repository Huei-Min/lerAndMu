<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>氣喘照護日誌（樂樂＆沐沐）</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
    function searchByDate() {
      const searchDate = document.getElementById('searchDate').value;
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => {
        const timeCell = row.querySelector('td');
        const date = timeCell.textContent.split(' ')[0];
        row.style.display = date === searchDate ? '' : 'none';
      });
    }

    function resetSearch() {
      document.getElementById('searchDate').value = '';
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => row.style.display = '');
    }

  </script>
  <script src="https://unpkg.com/jspdf@2.5.1/dist/fonts/NotoSansCJKtc-normal.js">
    function searchByDate() {
      const searchDate = document.getElementById('searchDate').value;
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => {
        const timeCell = row.querySelector('td');
        const date = timeCell.textContent.split(' ')[0];
        row.style.display = date === searchDate ? '' : 'none';
      });
    }

    function resetSearch() {
      document.getElementById('searchDate').value = '';
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => row.style.display = '');
    }

  </script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    table, th, td { border: 1px solid #aaa; border-collapse: collapse; padding: 5px; }
    th { background: #eee; }
    label { margin-right: 10px; }
    h2 { color: #5b5b5b; }
  </style>
</head>
<body>
  <h2>氣喘照護日誌（樂樂＆沐沐）</h2>
  <form id="logForm">
    <label>日期：<input type="date" id="date" required></label><br><br>
    <label>小朋友：
      <select id="name" required>
        <option value="樂樂">樂樂</option>
        <option value="沐沐">沐沐</option>
      </select>
    </label><br><br>
    <fieldset><legend>用藥情形</legend>
      <label>吸入劑（早）<input type="checkbox" id="inhalerMorning"></label>
      <label>吸入劑（晚）<input type="checkbox" id="inhalerEvening"></label>
      <label>欣流<input type="checkbox" id="singulair"></label>
    </fieldset><br>
    <fieldset><legend>飲食</legend>
      <label>食物名稱<input type="text" id="foodName"></label>
      <label>成分<input type="text" id="ingredients"></label>
      <label>重量（g）<input type="number" id="weight"></label>
    </fieldset><br>
    <fieldset><legend>症狀紀錄</legend>
      <label>氣喘發作<input type="checkbox" id="asthmaAttack"></label><br>
      <label>使用緊急用藥<input type="checkbox" id="emergencyUsed"></label>
      <label>使用次數<input type="number" id="emergencyTimes" value="0"></label><br><br>
      <strong>感冒症狀：</strong><br>
      <label>咳嗽<input type="checkbox" id="coldCough"></label>
      <label>流鼻水<input type="checkbox" id="coldRunnyNose"></label>
      <label>發燒<input type="checkbox" id="coldFever"></label><br><br>
      <label>鼻炎<input type="checkbox" id="rhinitis"></label>
    </fieldset><br>
    <button type="submit">新增紀錄</button>
  </form>

  <br><hr><br>

  <label>選擇起始日期<input type="date" id="startDate"></label>
  <label>結束日期<input type="date" id="endDate"></label>
  <button onclick="exportToCSV()">匯出 CSV</button>
  <button onclick="exportToPDF()">匯出 PDF 報告</button>

  
  <h3>查詢特定日期紀錄</h3>
  <label>查詢日期：<input type="date" id="searchDate"></label>
  <button onclick="searchByDate()">查詢</button>
  <button onclick="resetSearch()">重設</button>

  <h3>紀錄表格</h3>
  <table id="logTable">
    <thead>
      <tr><th>時間</th><th>小朋友</th><th>吸入劑(早)</th><th>吸入劑(晚)</th><th>欣流</th><th>食物</th><th>成分</th><th>重量</th><th>氣喘</th><th>緊急</th><th>次數</th><th>咳嗽</th><th>鼻水</th><th>發燒</th><th>鼻炎</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <script>
    // JavaScript omitted here for brevity since previously provided.
  
    function searchByDate() {
      const searchDate = document.getElementById('searchDate').value;
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => {
        const timeCell = row.querySelector('td');
        const date = timeCell.textContent.split(' ')[0];
        row.style.display = date === searchDate ? '' : 'none';
      });
    }

    function resetSearch() {
      document.getElementById('searchDate').value = '';
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach(row => row.style.display = '');
    }

  </script>
</body>
</html>
